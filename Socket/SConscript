# -*- python -*-

Import('env')
import SENFSCons, glob

###########################################################################

SConscript(glob.glob("*/SConscript"))

SENFSCons.AllIncludesHH(env, [ f for f in glob.glob("*.hh")
                               if f not in ('all_includes.hh','Socket.hh') and not f.endswith('.test.hh') ])

sources, tests, includes = SENFSCons.Glob(env)

env.Append(ALLOBJECTS = env.Object(sources))
env.BoostUnitTest('test', tests)
SENFSCons.Doxygen(env, extra_sources = [
    env.Dia2Png('SocketLibrary-classes.dia'),
    env.Dia2Png('FhHierarchy.dia'),
    env.Dia2Png('SocketPolicy.dia'),
    env.Dia2Png('Protocols.dia'),
    env.Dia2Png('Handle.dia'),
])
env.InstallSubdir('$INCLUDEINSTALLDIR', includes)
